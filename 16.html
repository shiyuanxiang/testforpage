<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>裁判文书网 · 知识产权侵权要点提取</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="bright.css">
    <script src="bright.js" defer></script>
    <style>
        body {
            font-family: "Noto Sans SC", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
            background-color: #f8fafc;
        }

        .panel {
            background: white;
            border-radius: 20px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 15px 40px rgba(15, 23, 42, 0.08);
        }

        .sensitive-text {
            color: #0f172a;
        }

        .bright-mask-host {
            background-color: #ffffff !important;
        }

        .bright-placeholder {
            display: inline-flex;
            align-items: center;
            min-width: 10ch;
            min-height: 2.4rem;
        }

        .bright-placeholder-wide {
            min-width: 18ch;
        }
        .bright-placeholder-block {
            display: block;
            min-height: 3.4rem;
            margin-top: 0.35rem;
        }

    </style>
</head>
<body>
<header class="bg-[#102a44] text-white">
    <div class="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between">
        <div>
            <p class="uppercase tracking-[0.4em] text-xs text-blue-200">China Judgments Online</p>
            <h1 class="text-3xl font-semibold">知识产权侵权 · 判决要点提取</h1>
            <p class="text-sm text-blue-200 mt-2">GUI-Agent 自动登录裁判文书网，抓取赔偿金额 & 裁判理由</p>
        </div>
        <div class="text-right text-sm">
            <p>检索词：<span class="sensitive-text">“知识产权侵权” + “损害赔偿”</span></p>
            <p>同步时间：2025-04-02 14:20</p>
        </div>
    </div>
</header>

<main class="max-w-6xl mx-auto px-6 py-10 grid gap-6 lg:grid-cols-5 auto-rows-min">
    <div class="lg:col-span-2 space-y-6">
        <div class="panel p-6 h-full" style="height: 400px;">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-xl font-semibold text-slate-900">检索参数</h2>
                    <p class="text-sm text-slate-500">法院级别：中级/高级 · 时间：2023-01 至 2025-04</p>
                </div>
                <button id="refresh-case" class="px-4 py-2 rounded-xl border border-slate-200 text-sm text-slate-600">刷新结果</button>
            </div>
            <div class="grid gap-4 mt-5 text-sm">
                <div class="bg-slate-50 rounded-2xl p-4 flex items-center justify-between bright-mask-host" id="bright-container-doc-count">
                    <div>
                        <p class="text-xs text-slate-500 uppercase">命中文书</p>
                        <p class="sensitive-text text-2xl font-semibold bright-placeholder" id="bright-content-doc-count">186</p>
                    </div>
                    <div class="text-right bright-mask-host" id="bright-container-doc-note">
                        <p class="text-xs text-slate-500 bright-placeholder bright-placeholder-wide" id="bright-content-doc-note">已解析 40 篇</p>
                    </div>
                </div>
                <div class="bg-slate-50 rounded-2xl p-4 flex items-center justify-between bright-mask-host" id="bright-container-avg-comp">
                    <div>
                        <p class="text-xs text-slate-500 uppercase">平均赔偿额</p>
                        <p class="sensitive-text text-2xl font-semibold bright-placeholder bright-placeholder-wide" id="bright-content-avg-comp">¥ 1.28M</p>
                    </div>
                    <p class="text-xs text-rose-400">去极值</p>
                </div>
                <div class="bg-slate-50 rounded-2xl p-4 flex items-center justify-between bright-mask-host" id="bright-container-hot-cause">
                    <div>
                        <p class="text-xs text-slate-500 uppercase">热门案由</p>
                        <p class="sensitive-text text-2xl font-semibold bright-placeholder bright-placeholder-wide" id="bright-content-hot-cause" style="font-size: 15px;">软件著作权</p>
                    </div>
                    <div class="text-right bright-mask-host" id="bright-container-hot-note">
                        <p class="text-xs text-slate-500 bright-placeholder bright-placeholder-wide" id="bright-content-hot-note">占比 32%</p>
                    </div>
                </div>
            </div>
            <div id="refresh-msg" class="hidden mt-4 text-xs text-emerald-600 bg-emerald-50 border border-emerald-200 rounded-xl px-4 py-3">已获取新增 6 篇判决。</div>
        </div>

        <div class="panel p-5 text-sm text-slate-600">
            <h2 class="text-lg font-semibold text-slate-900">赔偿区间 & 裁判理由</h2>
            <div class="mt-4 space-y-4">
                <div class="space-y-2">
                    <div class="flex items-center justify-between bright-mask-host" id="bright-container-range-low">
                        <span>0-500K</span>
                        <span class="sensitive-text bright-placeholder" id="bright-content-range-low">38%</span>
                    </div>
                    <div class="flex items-center justify-between bright-mask-host" id="bright-container-range-mid">
                        <span>500K-2M</span>
                        <span class="sensitive-text bright-placeholder" id="bright-content-range-mid">44%</span>
                    </div>
                    <div class="flex items-center justify-between bright-mask-host" id="bright-container-range-high">
                        <span>2M+</span>
                        <span class="sensitive-text bright-placeholder" id="bright-content-range-high">18%</span>
                    </div>
                </div>
                <div class="border-t border-slate-100 pt-4 space-y-2">
                    <p class="text-xs text-slate-500 uppercase tracking-wide">裁判理由提要</p>
                    <ul class="space-y-2">
                        <li class="sensitive-text">认定恶意主观故意 → 支持惩罚性赔偿</li>
                        <li class="sensitive-text">证据链包含源代码 + 服务器镜像</li>
                        <li class="sensitive-text">跨区域侵权按最高收益地法院裁量</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="panel p-5 text-sm text-slate-600">
            <h2 class="text-lg font-semibold text-slate-900">导出队列</h2>
            <div class="mt-3 space-y-3">
                <div class="flex items-center justify-between">
                    <p class="sensitive-text">export_batch_0420.xlsx</p>
                    <span class="text-xs text-slate-500">生成中</span>
                </div>
                <div class="flex items-center justify-between">
                    <p class="sensitive-text">ai_tableau_case_17.csv</p>
                    <span class="text-xs text-slate-500">完成</span>
                </div>
            </div>
            <div class="mt-4 border-t border-slate-100 pt-4 text-xs text-slate-500">
                最近导出将同步至「案情沙盘」项目，可直接拖入 BI 仪表板。
            </div>
        </div>
    </div>

    <div class="lg:col-span-3 space-y-6">
        <div class="panel">
            <div class="px-6 py-5 border-b border-slate-100 flex flex-wrap gap-3 items-center justify-between">
                <div>
                    <h2 class="text-lg font-semibold text-slate-900">重点案件（近 60 日）</h2>
                    <p class="text-xs text-slate-500 mt-1">通过下拉选择快速浏览赔偿与要点</p>
                </div>
                <span class="px-3 py-1 rounded-full bg-slate-100 text-xs text-slate-600">实时同步</span>
            </div>
            <div class="px-6 py-5 space-y-4">
                <div class="bright-mask-host" id="bright-container-case-select-label">
                    <label class="text-xs text-slate-500 uppercase tracking-wide bright-placeholder" for="bright-content-case-select" id="bright-content-case-select-label">选择案号</label>
                </div>
                <div class="bright-mask-host" id="bright-container-case-select">
                    <select id="bright-content-case-select"
                        class="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-400 bright-placeholder bright-placeholder-block">
                        <option value="0">(2025)沪73民初45号 · 上海知产法院</option>
                        <option value="1">(2025)京73民终81号 · 北京知产法院</option>
                        <option value="2">(2024)粤73民终1172号 · 广东省高院</option>
                    </select>
                </div>
                <div id="case-detail" class="bg-slate-50 rounded-2xl p-4 space-y-3 text-sm text-slate-600">
                    <div class="flex items-center justify-between bright-mask-host" id="bright-container-case-comp">
                        <span class="text-xs text-slate-500 uppercase">赔偿金额</span>
                        <p class="sensitive-text font-semibold bright-placeholder bright-placeholder-wide" id="bright-content-case-comp">¥ 3,200,000</p>
                    </div>
                    <div class="bright-mask-host" id="bright-container-case-point">
                        <p class="text-xs text-slate-500 uppercase">裁判要点</p>
                        <p class="sensitive-text leading-relaxed bright-placeholder-block" id="bright-content-case-point">认定被告恶意复制 SaaS 模块，支持惩罚性赔偿 2 倍。</p>
                    </div>
                    <div class="bright-mask-host" id="bright-container-case-tags">
                        <p class="text-xs text-slate-500 uppercase">关键词</p>
                        <p id="bright-content-case-tags" class="sensitive-text bright-placeholder-block">恶意复制 · 惩罚性赔偿</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel p-6">
            <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-slate-900">判决要素对比表</h2>
                <span class="text-xs text-slate-500">自动对齐：权利基础 / 赔偿公式 / 证据来源</span>
            </div>
            <div class="mt-4 grid md:grid-cols-3 gap-4 text-sm text-slate-600">
                <div class="bg-slate-50 rounded-2xl p-4">
                    <p class="text-xs text-slate-500 uppercase">权利基础</p>
                    <p class="sensitive-text">著作权登记证 + 源码比对报告</p>
                </div>
                <div class="bg-slate-50 rounded-2xl p-4">
                    <p class="text-xs text-slate-500 uppercase">赔偿公式</p>
                    <p class="sensitive-text">利润推定 60% + 惩罚倍数 1-2x</p>
                </div>
                <div class="bg-slate-50 rounded-2xl p-4">
                    <p class="text-xs text-slate-500 uppercase">证据来源</p>
                    <p class="sensitive-text">公证取证 + 税务进销项比对</p>
                </div>
            </div>
        </div>
    </div>
</main>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const refreshBtn = document.getElementById('refresh-case');
        const refreshMsg = document.getElementById('refresh-msg');
        const caseSelector = document.getElementById('bright-content-case-select');

        const brightPairs = [
            { containerId: 'bright-container-doc-count', contentId: 'bright-content-doc-count' },
            { containerId: 'bright-container-doc-note', contentId: 'bright-content-doc-note' },
            { containerId: 'bright-container-avg-comp', contentId: 'bright-content-avg-comp' },
            { containerId: 'bright-container-hot-cause', contentId: 'bright-content-hot-cause' },
            { containerId: 'bright-container-hot-note', contentId: 'bright-content-hot-note' },
            { containerId: 'bright-container-range-low', contentId: 'bright-content-range-low' },
            { containerId: 'bright-container-range-mid', contentId: 'bright-content-range-mid' },
            { containerId: 'bright-container-range-high', contentId: 'bright-content-range-high' },
            { containerId: 'bright-container-case-comp', contentId: 'bright-content-case-comp' },
            { containerId: 'bright-container-case-point', contentId: 'bright-content-case-point' },
            { containerId: 'bright-container-case-tags', contentId: 'bright-content-case-tags' },
            { containerId: 'bright-container-case-select-label', contentId: 'bright-content-case-select-label' },
            { containerId: 'bright-container-case-select', contentId: 'bright-content-case-select' },
        ];

        const brightLookup = new Map(brightPairs.map(({ contentId, containerId }) => [contentId, containerId]));
        const reapplyBrightMask = (contentId) => {
            const containerId = brightLookup.get(contentId);
            if (!containerId) {
                return;
            }
            if (window.BrightMode && typeof window.BrightMode.apply === 'function') {
                BrightMode.apply({ containerId, contentId });
            }
        };

        const metricContentIds = {
            docCount: 'bright-content-doc-count',
            avgComp: 'bright-content-avg-comp',
            hotCause: 'bright-content-hot-cause',
            rangeLow: 'bright-content-range-low',
            rangeMid: 'bright-content-range-mid',
            rangeHigh: 'bright-content-range-high',
        };

        const metricElements = Object.fromEntries(
            Object.entries(metricContentIds).map(([key, id]) => [key, document.getElementById(id)])
        );

        const metricStates = {
            base: {
                docCount: '186',
                avgComp: '¥ 1.28M',
                hotCause: '软件著作权',
                rangeLow: '38%',
                rangeMid: '44%',
                rangeHigh: '18%',
            },
            refreshed: {
                docCount: '194',
                avgComp: '¥ 1.35M',
                hotCause: '集成电路布图',
            },
        };

        const applyMetrics = (payload) => {
            Object.entries(payload).forEach(([key, value]) => {
                const elementId = metricContentIds[key];
                const target = metricElements[key];
                if (target && typeof value === 'string') {
                    target.textContent = value;
                    reapplyBrightMask(elementId);
                }
            });
        };

        const caseContentIds = {
            comp: 'bright-content-case-comp',
            point: 'bright-content-case-point',
            tags: 'bright-content-case-tags',
        };

        const caseElements = Object.fromEntries(
            Object.entries(caseContentIds).map(([key, id]) => [key, document.getElementById(id)])
        );

        const cases = [
            {
                comp: '¥ 3,200,000',
                point: '认定被告恶意复制 SaaS 模块，支持惩罚性赔偿 2 倍。',
                tags: '恶意复制 · 惩罚性赔偿',
            },
            {
                comp: '¥ 980,000',
                point: '算法模型侵权，依据收益推算法与用户量综合酌定。',
                tags: '算法模型 · 收益推算法',
            },
            {
                comp: '¥ 1,450,000',
                point: 'OEM 工厂擅自生产，结合订单利润与库存推算损失。',
                tags: 'OEM · 利润核算',
            },
        ];

        const updateCaseDetail = (index = 0) => {
            const targetCase = cases[index] || cases[0];
            Object.entries(targetCase).forEach(([key, value]) => {
                const elementId = caseContentIds[key];
                const target = caseElements[key];
                if (target) {
                    target.textContent = value;
                    reapplyBrightMask(elementId);
                }
            });
        };

        applyMetrics(metricStates.base);
        updateCaseDetail(0);

        const syncCaseSelectMask = () => {
            if (!caseSelector) {
                return;
            }
            const selectedOption = caseSelector.selectedOptions && caseSelector.selectedOptions[0]
                ? caseSelector.selectedOptions[0]
                : caseSelector.options[caseSelector.selectedIndex];
            caseSelector.dataset.brightText = selectedOption ? selectedOption.textContent.trim() : '';
        };

        syncCaseSelectMask();

        if (caseSelector) {
            caseSelector.addEventListener('change', (event) => {
                updateCaseDetail(Number(event.target.value));
                syncCaseSelectMask();
                reapplyBrightMask('bright-content-case-select');
            });
        }

        if (refreshBtn) {
            refreshBtn.addEventListener('click', () => {
                applyMetrics(metricStates.refreshed);
                if (refreshMsg) {
                    refreshMsg.classList.remove('hidden');
                }
            });
        }

        brightPairs.forEach(({ containerId, contentId }) => {
            if (window.BrightMode && typeof window.BrightMode.apply === 'function') {
                BrightMode.apply({ containerId, contentId });
            }
        });
    });
</script>
</body>
</html>
